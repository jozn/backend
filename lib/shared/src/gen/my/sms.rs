// DO NOT MODIFY AUTO-GENERATED BY PB-WALKER
use mysql_async::prelude::*;
use mysql_async::{FromRowError, OptsBuilder, Params, Row, Pool};
use mysql_common::row::ColumnIndex;

use mysql_common::value::Value;
use crate::mysql_shared::*;

#[derive(Default, Clone, PartialEq, Eq, Debug)]
pub struct Sms  { // sms
    pub sms_id: u64,
    pub phone_number: String,
    pub hash_code: String,
    pub result_code: u32,
    pub pb_data: Vec<u8>,
    pub debug_data: String,
}

impl FromRow for Sms {
    fn from_row_opt(row: Row) -> Result<Self, FromRowError>
    where
        Self: Sized,
    {
        Ok(Sms  {
            sms_id: row.get(0).unwrap_or_default(),
            phone_number: row.get(1).unwrap_or_default(),
            hash_code: row.get(2).unwrap_or_default(),
            result_code: row.get(3).unwrap_or_default(),
            pb_data: row.get(4).unwrap_or_default(),
            debug_data: row.get(5).unwrap_or_default(),
        })
    }
}

impl Sms {
    pub async fn insert(&self, spool: &SPool) -> Result<Sms,MyError> {
        let mut conn = spool.pool.get_conn().await?;

        let query = format!(r"INSERT INTO {:}.sms (phone_number, hash_code, result_code, pb_data, debug_data) VALUES (?, ?, ?, ?, ?)",&spool.database);
        let p = Params::Positional(vec![self.phone_number.clone().into(), self.hash_code.clone().into(), self.result_code.clone().into(), self.pb_data.clone().into(), self.debug_data.clone().into()]);

        let qr = conn.exec_iter(
            query, p
        ).await?;

        let mut cp = self.clone();
        cp.sms_id = qr.last_insert_id().unwrap() as u64;
        Ok(cp)
    }


    // todo add replace with coping insert after it's complete

    pub async fn update(&self, spool: &SPool) -> Result<(),MyError> {
        let mut conn = spool.pool.get_conn().await?;
        let query = format!(r"UPDATE `{:}`.sms` SET phone_number = ?, hash_code = ?, result_code = ?, pb_data = ?, debug_data = ? WHERE sms_id = ? ", &spool.database);
        let p = Params::Positional(vec![self.phone_number.clone().into(), self.hash_code.clone().into(), self.result_code.clone().into(), self.pb_data.clone().into(), self.debug_data.clone().into(),  self.sms_id.clone().into() ]);

        let qr = conn.exec_iter(
            query, p
        ).await?;

        Ok(())
    }

    pub async fn delete(&self, spool: &SPool) -> Result<(),MyError> {
        let mut conn = spool.pool.get_conn().await?;

        let query = format!(r"DELETE FROM `{:}`.sms` WHERE sms_id = ? ", &spool.database);
        let p = Params::Positional(vec![self.sms_id.clone().into()]);

        conn.exec_drop(
            query, p
        ).await?;

        Ok(())
    }
}


#[derive(Default, Debug)]
pub struct SmsSelector {
    q: TQuery
}

impl SmsSelector {
    pub fn new() -> Self {
        SmsSelector{
            q: TQuery{
                table: "sms",
                ..Default::default()
            }
        }
    }

    pub fn limit(&mut self, size: u32) -> &mut Self {
        self.q.limit = size;
        self
    }

    pub fn offset(&mut self, size: u32) -> &mut Self {
        self.q.offset = size;
        self
    }

    pub fn select_all(&mut self) -> &mut Self {
        // Default is select *
        self
    }

    //each column select
    pub fn select_sms_id(&mut self) -> &mut Self {
        self.q.select_cols.push("sms_id");
        self
    }
    
    pub fn select_phone_number(&mut self) -> &mut Self {
        self.q.select_cols.push("phone_number");
        self
    }
    
    pub fn select_hash_code(&mut self) -> &mut Self {
        self.q.select_cols.push("hash_code");
        self
    }
    
    pub fn select_result_code(&mut self) -> &mut Self {
        self.q.select_cols.push("result_code");
        self
    }
    
    pub fn select_pb_data(&mut self) -> &mut Self {
        self.q.select_cols.push("pb_data");
        self
    }
    
    pub fn select_debug_data(&mut self) -> &mut Self {
        self.q.select_cols.push("debug_data");
        self
    }
    

    pub async fn _get_rows_with_size(&mut self, session: &SPool, size: i64) -> Result<Vec<Sms>, MyError>   {
        let mut conn = session.pool.get_conn().await?;
        let(cql_query, query_values) = self.q._to_sql_selector(&session.database);

        println!("{} - {:?}", &cql_query, &query_values);

        let p = Params::Positional(query_values);

        let query_result = conn
            .exec_map(
                cql_query,p,
                |obj: Sms| obj
            ).await?;

        Ok(query_result)
    }

    pub async fn get_rows(&mut self, session: &SPool) -> Result<Vec<Sms>, MyError>{
        self._get_rows_with_size(session,-1).await
    }

    pub async fn get_row(&mut self, session: &SPool) -> Result<Sms, MyError>{
        let rows = self._get_rows_with_size(session,1).await?;

        let opt = rows.get(0);
        match opt {
            Some(row) => Ok(row.to_owned()),
            None => Err(MyError::NotFound)
        }
    }

    // Modifiers
    
    pub fn order_by_sms_id_asc(&mut self) -> &mut Self {
		self.q.order_by.push("sms_id ASC");
        self
    }

	pub fn order_by_sms_id_desc(&mut self) -> &mut Self {
		self.q.order_by.push("sms_id DESC");
        self
    }

    pub fn order_by_phone_number_asc(&mut self) -> &mut Self {
		self.q.order_by.push("phone_number ASC");
        self
    }

	pub fn order_by_phone_number_desc(&mut self) -> &mut Self {
		self.q.order_by.push("phone_number DESC");
        self
    }

    pub fn order_by_hash_code_asc(&mut self) -> &mut Self {
		self.q.order_by.push("hash_code ASC");
        self
    }

	pub fn order_by_hash_code_desc(&mut self) -> &mut Self {
		self.q.order_by.push("hash_code DESC");
        self
    }

    pub fn order_by_result_code_asc(&mut self) -> &mut Self {
		self.q.order_by.push("result_code ASC");
        self
    }

	pub fn order_by_result_code_desc(&mut self) -> &mut Self {
		self.q.order_by.push("result_code DESC");
        self
    }

    pub fn order_by_debug_data_asc(&mut self) -> &mut Self {
		self.q.order_by.push("debug_data ASC");
        self
    }

	pub fn order_by_debug_data_desc(&mut self) -> &mut Self {
		self.q.order_by.push("debug_data DESC");
        self
    }

    
    pub fn sms_id_eq (&mut self, val: u64 ) -> &mut Self {
        let w = WhereClause{
            condition: " sms_id = ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn sms_id_lt (&mut self, val: u64 ) -> &mut Self {
        let w = WhereClause{
            condition: " sms_id < ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn sms_id_le (&mut self, val: u64 ) -> &mut Self {
        let w = WhereClause{
            condition: " sms_id <= ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn sms_id_gt (&mut self, val: u64 ) -> &mut Self {
        let w = WhereClause{
            condition: " sms_id > ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn sms_id_ge (&mut self, val: u64 ) -> &mut Self {
        let w = WhereClause{
            condition: " sms_id >= ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn and_sms_id_eq (&mut self, val: u64 ) -> &mut Self {
        let w = WhereClause{
            condition: "AND sms_id = ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn and_sms_id_lt (&mut self, val: u64 ) -> &mut Self {
        let w = WhereClause{
            condition: "AND sms_id < ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn and_sms_id_le (&mut self, val: u64 ) -> &mut Self {
        let w = WhereClause{
            condition: "AND sms_id <= ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn and_sms_id_gt (&mut self, val: u64 ) -> &mut Self {
        let w = WhereClause{
            condition: "AND sms_id > ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn and_sms_id_ge (&mut self, val: u64 ) -> &mut Self {
        let w = WhereClause{
            condition: "AND sms_id >= ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn or_sms_id_eq (&mut self, val: u64 ) -> &mut Self {
        let w = WhereClause{
            condition: "OR sms_id = ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn or_sms_id_lt (&mut self, val: u64 ) -> &mut Self {
        let w = WhereClause{
            condition: "OR sms_id < ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn or_sms_id_le (&mut self, val: u64 ) -> &mut Self {
        let w = WhereClause{
            condition: "OR sms_id <= ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn or_sms_id_gt (&mut self, val: u64 ) -> &mut Self {
        let w = WhereClause{
            condition: "OR sms_id > ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn or_sms_id_ge (&mut self, val: u64 ) -> &mut Self {
        let w = WhereClause{
            condition: "OR sms_id >= ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn phone_number_eq (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: " phone_number = ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn phone_number_lt (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: " phone_number < ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn phone_number_le (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: " phone_number <= ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn phone_number_gt (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: " phone_number > ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn phone_number_ge (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: " phone_number >= ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn and_phone_number_eq (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: "AND phone_number = ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn and_phone_number_lt (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: "AND phone_number < ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn and_phone_number_le (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: "AND phone_number <= ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn and_phone_number_gt (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: "AND phone_number > ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn and_phone_number_ge (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: "AND phone_number >= ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn or_phone_number_eq (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: "OR phone_number = ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn or_phone_number_lt (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: "OR phone_number < ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn or_phone_number_le (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: "OR phone_number <= ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn or_phone_number_gt (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: "OR phone_number > ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn or_phone_number_ge (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: "OR phone_number >= ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn hash_code_eq (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: " hash_code = ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn hash_code_lt (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: " hash_code < ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn hash_code_le (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: " hash_code <= ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn hash_code_gt (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: " hash_code > ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn hash_code_ge (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: " hash_code >= ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn and_hash_code_eq (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: "AND hash_code = ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn and_hash_code_lt (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: "AND hash_code < ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn and_hash_code_le (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: "AND hash_code <= ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn and_hash_code_gt (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: "AND hash_code > ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn and_hash_code_ge (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: "AND hash_code >= ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn or_hash_code_eq (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: "OR hash_code = ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn or_hash_code_lt (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: "OR hash_code < ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn or_hash_code_le (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: "OR hash_code <= ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn or_hash_code_gt (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: "OR hash_code > ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn or_hash_code_ge (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: "OR hash_code >= ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn result_code_eq (&mut self, val: u32 ) -> &mut Self {
        let w = WhereClause{
            condition: " result_code = ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn result_code_lt (&mut self, val: u32 ) -> &mut Self {
        let w = WhereClause{
            condition: " result_code < ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn result_code_le (&mut self, val: u32 ) -> &mut Self {
        let w = WhereClause{
            condition: " result_code <= ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn result_code_gt (&mut self, val: u32 ) -> &mut Self {
        let w = WhereClause{
            condition: " result_code > ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn result_code_ge (&mut self, val: u32 ) -> &mut Self {
        let w = WhereClause{
            condition: " result_code >= ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn and_result_code_eq (&mut self, val: u32 ) -> &mut Self {
        let w = WhereClause{
            condition: "AND result_code = ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn and_result_code_lt (&mut self, val: u32 ) -> &mut Self {
        let w = WhereClause{
            condition: "AND result_code < ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn and_result_code_le (&mut self, val: u32 ) -> &mut Self {
        let w = WhereClause{
            condition: "AND result_code <= ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn and_result_code_gt (&mut self, val: u32 ) -> &mut Self {
        let w = WhereClause{
            condition: "AND result_code > ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn and_result_code_ge (&mut self, val: u32 ) -> &mut Self {
        let w = WhereClause{
            condition: "AND result_code >= ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn or_result_code_eq (&mut self, val: u32 ) -> &mut Self {
        let w = WhereClause{
            condition: "OR result_code = ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn or_result_code_lt (&mut self, val: u32 ) -> &mut Self {
        let w = WhereClause{
            condition: "OR result_code < ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn or_result_code_le (&mut self, val: u32 ) -> &mut Self {
        let w = WhereClause{
            condition: "OR result_code <= ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn or_result_code_gt (&mut self, val: u32 ) -> &mut Self {
        let w = WhereClause{
            condition: "OR result_code > ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn or_result_code_ge (&mut self, val: u32 ) -> &mut Self {
        let w = WhereClause{
            condition: "OR result_code >= ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn debug_data_eq (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: " debug_data = ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn debug_data_lt (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: " debug_data < ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn debug_data_le (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: " debug_data <= ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn debug_data_gt (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: " debug_data > ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn debug_data_ge (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: " debug_data >= ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn and_debug_data_eq (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: "AND debug_data = ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn and_debug_data_lt (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: "AND debug_data < ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn and_debug_data_le (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: "AND debug_data <= ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn and_debug_data_gt (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: "AND debug_data > ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn and_debug_data_ge (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: "AND debug_data >= ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn or_debug_data_eq (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: "OR debug_data = ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn or_debug_data_lt (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: "OR debug_data < ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn or_debug_data_le (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: "OR debug_data <= ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn or_debug_data_gt (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: "OR debug_data > ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn or_debug_data_ge (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: "OR debug_data >= ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    
    pub fn sms_id_in (&mut self, val: Vec<u64> ) -> &mut Self {
		let len = val.len();
        if len == 0 {
            return self
        }

        let mut marks = "?,".repeat(len);
        marks.remove(marks.len()-1);

		let arr = val.iter().map(|v|v.into()).collect();

        let w = WhereInClause{
			condition: format!(" sms_id IN ({})", marks),
            args: arr,
        };
        self.q.wheres_ins.push(w);
        self
    }

    pub fn and_sms_id_in (&mut self, val: Vec<u64> ) -> &mut Self {
		let len = val.len();
        if len == 0 {
            return self
        }

        let mut marks = "?,".repeat(len);
        marks.remove(marks.len()-1);

		let arr = val.iter().map(|v|v.into()).collect();

        let w = WhereInClause{
			condition: format!("AND sms_id IN ({})", marks),
            args: arr,
        };
        self.q.wheres_ins.push(w);
        self
    }

    pub fn or_sms_id_in (&mut self, val: Vec<u64> ) -> &mut Self {
		let len = val.len();
        if len == 0 {
            return self
        }

        let mut marks = "?,".repeat(len);
        marks.remove(marks.len()-1);

		let arr = val.iter().map(|v|v.into()).collect();

        let w = WhereInClause{
			condition: format!("OR sms_id IN ({})", marks),
            args: arr,
        };
        self.q.wheres_ins.push(w);
        self
    }

    pub fn phone_number_in (&mut self, val: Vec<&str> ) -> &mut Self {
		let len = val.len();
        if len == 0 {
            return self
        }

        let mut marks = "?,".repeat(len);
        marks.remove(marks.len()-1);

		let arr = val.iter().map(|v|v.into()).collect();

        let w = WhereInClause{
			condition: format!(" phone_number IN ({})", marks),
            args: arr,
        };
        self.q.wheres_ins.push(w);
        self
    }

    pub fn and_phone_number_in (&mut self, val: Vec<&str> ) -> &mut Self {
		let len = val.len();
        if len == 0 {
            return self
        }

        let mut marks = "?,".repeat(len);
        marks.remove(marks.len()-1);

		let arr = val.iter().map(|v|v.into()).collect();

        let w = WhereInClause{
			condition: format!("AND phone_number IN ({})", marks),
            args: arr,
        };
        self.q.wheres_ins.push(w);
        self
    }

    pub fn or_phone_number_in (&mut self, val: Vec<&str> ) -> &mut Self {
		let len = val.len();
        if len == 0 {
            return self
        }

        let mut marks = "?,".repeat(len);
        marks.remove(marks.len()-1);

		let arr = val.iter().map(|v|v.into()).collect();

        let w = WhereInClause{
			condition: format!("OR phone_number IN ({})", marks),
            args: arr,
        };
        self.q.wheres_ins.push(w);
        self
    }

    pub fn hash_code_in (&mut self, val: Vec<&str> ) -> &mut Self {
		let len = val.len();
        if len == 0 {
            return self
        }

        let mut marks = "?,".repeat(len);
        marks.remove(marks.len()-1);

		let arr = val.iter().map(|v|v.into()).collect();

        let w = WhereInClause{
			condition: format!(" hash_code IN ({})", marks),
            args: arr,
        };
        self.q.wheres_ins.push(w);
        self
    }

    pub fn and_hash_code_in (&mut self, val: Vec<&str> ) -> &mut Self {
		let len = val.len();
        if len == 0 {
            return self
        }

        let mut marks = "?,".repeat(len);
        marks.remove(marks.len()-1);

		let arr = val.iter().map(|v|v.into()).collect();

        let w = WhereInClause{
			condition: format!("AND hash_code IN ({})", marks),
            args: arr,
        };
        self.q.wheres_ins.push(w);
        self
    }

    pub fn or_hash_code_in (&mut self, val: Vec<&str> ) -> &mut Self {
		let len = val.len();
        if len == 0 {
            return self
        }

        let mut marks = "?,".repeat(len);
        marks.remove(marks.len()-1);

		let arr = val.iter().map(|v|v.into()).collect();

        let w = WhereInClause{
			condition: format!("OR hash_code IN ({})", marks),
            args: arr,
        };
        self.q.wheres_ins.push(w);
        self
    }

    pub fn result_code_in (&mut self, val: Vec<u32> ) -> &mut Self {
		let len = val.len();
        if len == 0 {
            return self
        }

        let mut marks = "?,".repeat(len);
        marks.remove(marks.len()-1);

		let arr = val.iter().map(|v|v.into()).collect();

        let w = WhereInClause{
			condition: format!(" result_code IN ({})", marks),
            args: arr,
        };
        self.q.wheres_ins.push(w);
        self
    }

    pub fn and_result_code_in (&mut self, val: Vec<u32> ) -> &mut Self {
		let len = val.len();
        if len == 0 {
            return self
        }

        let mut marks = "?,".repeat(len);
        marks.remove(marks.len()-1);

		let arr = val.iter().map(|v|v.into()).collect();

        let w = WhereInClause{
			condition: format!("AND result_code IN ({})", marks),
            args: arr,
        };
        self.q.wheres_ins.push(w);
        self
    }

    pub fn or_result_code_in (&mut self, val: Vec<u32> ) -> &mut Self {
		let len = val.len();
        if len == 0 {
            return self
        }

        let mut marks = "?,".repeat(len);
        marks.remove(marks.len()-1);

		let arr = val.iter().map(|v|v.into()).collect();

        let w = WhereInClause{
			condition: format!("OR result_code IN ({})", marks),
            args: arr,
        };
        self.q.wheres_ins.push(w);
        self
    }

    pub fn debug_data_in (&mut self, val: Vec<&str> ) -> &mut Self {
		let len = val.len();
        if len == 0 {
            return self
        }

        let mut marks = "?,".repeat(len);
        marks.remove(marks.len()-1);

		let arr = val.iter().map(|v|v.into()).collect();

        let w = WhereInClause{
			condition: format!(" debug_data IN ({})", marks),
            args: arr,
        };
        self.q.wheres_ins.push(w);
        self
    }

    pub fn and_debug_data_in (&mut self, val: Vec<&str> ) -> &mut Self {
		let len = val.len();
        if len == 0 {
            return self
        }

        let mut marks = "?,".repeat(len);
        marks.remove(marks.len()-1);

		let arr = val.iter().map(|v|v.into()).collect();

        let w = WhereInClause{
			condition: format!("AND debug_data IN ({})", marks),
            args: arr,
        };
        self.q.wheres_ins.push(w);
        self
    }

    pub fn or_debug_data_in (&mut self, val: Vec<&str> ) -> &mut Self {
		let len = val.len();
        if len == 0 {
            return self
        }

        let mut marks = "?,".repeat(len);
        marks.remove(marks.len()-1);

		let arr = val.iter().map(|v|v.into()).collect();

        let w = WhereInClause{
			condition: format!("OR debug_data IN ({})", marks),
            args: arr,
        };
        self.q.wheres_ins.push(w);
        self
    }

}

// Updater

#[derive(Default, Debug)]
pub struct SmsUpdater {
    q: TQuery
}

impl SmsUpdater {
    pub fn new() -> Self {
        SmsUpdater{
            q: TQuery{
                table: "sms",
                ..Default::default()
            }
        }
    }

    pub fn limit(&mut self, size: u32) -> &mut Self {
        self.q.limit = size;
        self
    }

    //each column delete
    pub fn set_sms_id(&mut self, val :u64) -> &mut Self {
        self.q.updates.insert("sms_id",val.into());
        self
    }
    
    pub fn set_phone_number(&mut self, val :&str) -> &mut Self {
        self.q.updates.insert("phone_number",val.into());
        self
    }
    
    pub fn set_hash_code(&mut self, val :&str) -> &mut Self {
        self.q.updates.insert("hash_code",val.into());
        self
    }
    
    pub fn set_result_code(&mut self, val :u32) -> &mut Self {
        self.q.updates.insert("result_code",val.into());
        self
    }
    
    pub fn set_pb_data(&mut self, val :&Vec<u8>) -> &mut Self {
        self.q.updates.insert("pb_data",val.into());
        self
    }
    
    pub fn set_debug_data(&mut self, val :&str) -> &mut Self {
        self.q.updates.insert("debug_data",val.into());
        self
    }
    

    pub async fn update(&mut self, session: &SPool) -> Result<(),MyError> {
        update_rows(&self.q, session).await
    }

    
    pub fn order_by_sms_id_asc(&mut self) -> &mut Self {
		self.q.order_by.push("sms_id ASC");
        self
    }

	pub fn order_by_sms_id_desc(&mut self) -> &mut Self {
		self.q.order_by.push("sms_id DESC");
        self
    }

    pub fn order_by_phone_number_asc(&mut self) -> &mut Self {
		self.q.order_by.push("phone_number ASC");
        self
    }

	pub fn order_by_phone_number_desc(&mut self) -> &mut Self {
		self.q.order_by.push("phone_number DESC");
        self
    }

    pub fn order_by_hash_code_asc(&mut self) -> &mut Self {
		self.q.order_by.push("hash_code ASC");
        self
    }

	pub fn order_by_hash_code_desc(&mut self) -> &mut Self {
		self.q.order_by.push("hash_code DESC");
        self
    }

    pub fn order_by_result_code_asc(&mut self) -> &mut Self {
		self.q.order_by.push("result_code ASC");
        self
    }

	pub fn order_by_result_code_desc(&mut self) -> &mut Self {
		self.q.order_by.push("result_code DESC");
        self
    }

    pub fn order_by_debug_data_asc(&mut self) -> &mut Self {
		self.q.order_by.push("debug_data ASC");
        self
    }

	pub fn order_by_debug_data_desc(&mut self) -> &mut Self {
		self.q.order_by.push("debug_data DESC");
        self
    }

    
    pub fn sms_id_eq (&mut self, val: u64 ) -> &mut Self {
        let w = WhereClause{
            condition: " sms_id = ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn sms_id_lt (&mut self, val: u64 ) -> &mut Self {
        let w = WhereClause{
            condition: " sms_id < ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn sms_id_le (&mut self, val: u64 ) -> &mut Self {
        let w = WhereClause{
            condition: " sms_id <= ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn sms_id_gt (&mut self, val: u64 ) -> &mut Self {
        let w = WhereClause{
            condition: " sms_id > ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn sms_id_ge (&mut self, val: u64 ) -> &mut Self {
        let w = WhereClause{
            condition: " sms_id >= ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn and_sms_id_eq (&mut self, val: u64 ) -> &mut Self {
        let w = WhereClause{
            condition: "AND sms_id = ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn and_sms_id_lt (&mut self, val: u64 ) -> &mut Self {
        let w = WhereClause{
            condition: "AND sms_id < ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn and_sms_id_le (&mut self, val: u64 ) -> &mut Self {
        let w = WhereClause{
            condition: "AND sms_id <= ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn and_sms_id_gt (&mut self, val: u64 ) -> &mut Self {
        let w = WhereClause{
            condition: "AND sms_id > ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn and_sms_id_ge (&mut self, val: u64 ) -> &mut Self {
        let w = WhereClause{
            condition: "AND sms_id >= ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn or_sms_id_eq (&mut self, val: u64 ) -> &mut Self {
        let w = WhereClause{
            condition: "OR sms_id = ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn or_sms_id_lt (&mut self, val: u64 ) -> &mut Self {
        let w = WhereClause{
            condition: "OR sms_id < ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn or_sms_id_le (&mut self, val: u64 ) -> &mut Self {
        let w = WhereClause{
            condition: "OR sms_id <= ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn or_sms_id_gt (&mut self, val: u64 ) -> &mut Self {
        let w = WhereClause{
            condition: "OR sms_id > ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn or_sms_id_ge (&mut self, val: u64 ) -> &mut Self {
        let w = WhereClause{
            condition: "OR sms_id >= ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn phone_number_eq (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: " phone_number = ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn phone_number_lt (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: " phone_number < ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn phone_number_le (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: " phone_number <= ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn phone_number_gt (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: " phone_number > ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn phone_number_ge (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: " phone_number >= ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn and_phone_number_eq (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: "AND phone_number = ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn and_phone_number_lt (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: "AND phone_number < ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn and_phone_number_le (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: "AND phone_number <= ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn and_phone_number_gt (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: "AND phone_number > ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn and_phone_number_ge (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: "AND phone_number >= ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn or_phone_number_eq (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: "OR phone_number = ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn or_phone_number_lt (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: "OR phone_number < ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn or_phone_number_le (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: "OR phone_number <= ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn or_phone_number_gt (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: "OR phone_number > ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn or_phone_number_ge (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: "OR phone_number >= ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn hash_code_eq (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: " hash_code = ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn hash_code_lt (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: " hash_code < ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn hash_code_le (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: " hash_code <= ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn hash_code_gt (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: " hash_code > ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn hash_code_ge (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: " hash_code >= ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn and_hash_code_eq (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: "AND hash_code = ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn and_hash_code_lt (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: "AND hash_code < ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn and_hash_code_le (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: "AND hash_code <= ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn and_hash_code_gt (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: "AND hash_code > ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn and_hash_code_ge (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: "AND hash_code >= ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn or_hash_code_eq (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: "OR hash_code = ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn or_hash_code_lt (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: "OR hash_code < ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn or_hash_code_le (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: "OR hash_code <= ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn or_hash_code_gt (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: "OR hash_code > ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn or_hash_code_ge (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: "OR hash_code >= ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn result_code_eq (&mut self, val: u32 ) -> &mut Self {
        let w = WhereClause{
            condition: " result_code = ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn result_code_lt (&mut self, val: u32 ) -> &mut Self {
        let w = WhereClause{
            condition: " result_code < ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn result_code_le (&mut self, val: u32 ) -> &mut Self {
        let w = WhereClause{
            condition: " result_code <= ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn result_code_gt (&mut self, val: u32 ) -> &mut Self {
        let w = WhereClause{
            condition: " result_code > ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn result_code_ge (&mut self, val: u32 ) -> &mut Self {
        let w = WhereClause{
            condition: " result_code >= ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn and_result_code_eq (&mut self, val: u32 ) -> &mut Self {
        let w = WhereClause{
            condition: "AND result_code = ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn and_result_code_lt (&mut self, val: u32 ) -> &mut Self {
        let w = WhereClause{
            condition: "AND result_code < ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn and_result_code_le (&mut self, val: u32 ) -> &mut Self {
        let w = WhereClause{
            condition: "AND result_code <= ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn and_result_code_gt (&mut self, val: u32 ) -> &mut Self {
        let w = WhereClause{
            condition: "AND result_code > ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn and_result_code_ge (&mut self, val: u32 ) -> &mut Self {
        let w = WhereClause{
            condition: "AND result_code >= ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn or_result_code_eq (&mut self, val: u32 ) -> &mut Self {
        let w = WhereClause{
            condition: "OR result_code = ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn or_result_code_lt (&mut self, val: u32 ) -> &mut Self {
        let w = WhereClause{
            condition: "OR result_code < ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn or_result_code_le (&mut self, val: u32 ) -> &mut Self {
        let w = WhereClause{
            condition: "OR result_code <= ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn or_result_code_gt (&mut self, val: u32 ) -> &mut Self {
        let w = WhereClause{
            condition: "OR result_code > ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn or_result_code_ge (&mut self, val: u32 ) -> &mut Self {
        let w = WhereClause{
            condition: "OR result_code >= ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn debug_data_eq (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: " debug_data = ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn debug_data_lt (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: " debug_data < ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn debug_data_le (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: " debug_data <= ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn debug_data_gt (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: " debug_data > ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn debug_data_ge (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: " debug_data >= ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn and_debug_data_eq (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: "AND debug_data = ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn and_debug_data_lt (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: "AND debug_data < ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn and_debug_data_le (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: "AND debug_data <= ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn and_debug_data_gt (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: "AND debug_data > ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn and_debug_data_ge (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: "AND debug_data >= ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn or_debug_data_eq (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: "OR debug_data = ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn or_debug_data_lt (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: "OR debug_data < ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn or_debug_data_le (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: "OR debug_data <= ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn or_debug_data_gt (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: "OR debug_data > ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn or_debug_data_ge (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: "OR debug_data >= ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    
    pub fn sms_id_in (&mut self, val: Vec<u64> ) -> &mut Self {
		let len = val.len();
        if len == 0 {
            return self
        }

        let mut marks = "?,".repeat(len);
        marks.remove(marks.len()-1);

		let arr = val.iter().map(|v|v.into()).collect();

        let w = WhereInClause{
			condition: format!(" sms_id IN ({})", marks),
            args: arr,
        };
        self.q.wheres_ins.push(w);
        self
    }

    pub fn and_sms_id_in (&mut self, val: Vec<u64> ) -> &mut Self {
		let len = val.len();
        if len == 0 {
            return self
        }

        let mut marks = "?,".repeat(len);
        marks.remove(marks.len()-1);

		let arr = val.iter().map(|v|v.into()).collect();

        let w = WhereInClause{
			condition: format!("AND sms_id IN ({})", marks),
            args: arr,
        };
        self.q.wheres_ins.push(w);
        self
    }

    pub fn or_sms_id_in (&mut self, val: Vec<u64> ) -> &mut Self {
		let len = val.len();
        if len == 0 {
            return self
        }

        let mut marks = "?,".repeat(len);
        marks.remove(marks.len()-1);

		let arr = val.iter().map(|v|v.into()).collect();

        let w = WhereInClause{
			condition: format!("OR sms_id IN ({})", marks),
            args: arr,
        };
        self.q.wheres_ins.push(w);
        self
    }

    pub fn phone_number_in (&mut self, val: Vec<&str> ) -> &mut Self {
		let len = val.len();
        if len == 0 {
            return self
        }

        let mut marks = "?,".repeat(len);
        marks.remove(marks.len()-1);

		let arr = val.iter().map(|v|v.into()).collect();

        let w = WhereInClause{
			condition: format!(" phone_number IN ({})", marks),
            args: arr,
        };
        self.q.wheres_ins.push(w);
        self
    }

    pub fn and_phone_number_in (&mut self, val: Vec<&str> ) -> &mut Self {
		let len = val.len();
        if len == 0 {
            return self
        }

        let mut marks = "?,".repeat(len);
        marks.remove(marks.len()-1);

		let arr = val.iter().map(|v|v.into()).collect();

        let w = WhereInClause{
			condition: format!("AND phone_number IN ({})", marks),
            args: arr,
        };
        self.q.wheres_ins.push(w);
        self
    }

    pub fn or_phone_number_in (&mut self, val: Vec<&str> ) -> &mut Self {
		let len = val.len();
        if len == 0 {
            return self
        }

        let mut marks = "?,".repeat(len);
        marks.remove(marks.len()-1);

		let arr = val.iter().map(|v|v.into()).collect();

        let w = WhereInClause{
			condition: format!("OR phone_number IN ({})", marks),
            args: arr,
        };
        self.q.wheres_ins.push(w);
        self
    }

    pub fn hash_code_in (&mut self, val: Vec<&str> ) -> &mut Self {
		let len = val.len();
        if len == 0 {
            return self
        }

        let mut marks = "?,".repeat(len);
        marks.remove(marks.len()-1);

		let arr = val.iter().map(|v|v.into()).collect();

        let w = WhereInClause{
			condition: format!(" hash_code IN ({})", marks),
            args: arr,
        };
        self.q.wheres_ins.push(w);
        self
    }

    pub fn and_hash_code_in (&mut self, val: Vec<&str> ) -> &mut Self {
		let len = val.len();
        if len == 0 {
            return self
        }

        let mut marks = "?,".repeat(len);
        marks.remove(marks.len()-1);

		let arr = val.iter().map(|v|v.into()).collect();

        let w = WhereInClause{
			condition: format!("AND hash_code IN ({})", marks),
            args: arr,
        };
        self.q.wheres_ins.push(w);
        self
    }

    pub fn or_hash_code_in (&mut self, val: Vec<&str> ) -> &mut Self {
		let len = val.len();
        if len == 0 {
            return self
        }

        let mut marks = "?,".repeat(len);
        marks.remove(marks.len()-1);

		let arr = val.iter().map(|v|v.into()).collect();

        let w = WhereInClause{
			condition: format!("OR hash_code IN ({})", marks),
            args: arr,
        };
        self.q.wheres_ins.push(w);
        self
    }

    pub fn result_code_in (&mut self, val: Vec<u32> ) -> &mut Self {
		let len = val.len();
        if len == 0 {
            return self
        }

        let mut marks = "?,".repeat(len);
        marks.remove(marks.len()-1);

		let arr = val.iter().map(|v|v.into()).collect();

        let w = WhereInClause{
			condition: format!(" result_code IN ({})", marks),
            args: arr,
        };
        self.q.wheres_ins.push(w);
        self
    }

    pub fn and_result_code_in (&mut self, val: Vec<u32> ) -> &mut Self {
		let len = val.len();
        if len == 0 {
            return self
        }

        let mut marks = "?,".repeat(len);
        marks.remove(marks.len()-1);

		let arr = val.iter().map(|v|v.into()).collect();

        let w = WhereInClause{
			condition: format!("AND result_code IN ({})", marks),
            args: arr,
        };
        self.q.wheres_ins.push(w);
        self
    }

    pub fn or_result_code_in (&mut self, val: Vec<u32> ) -> &mut Self {
		let len = val.len();
        if len == 0 {
            return self
        }

        let mut marks = "?,".repeat(len);
        marks.remove(marks.len()-1);

		let arr = val.iter().map(|v|v.into()).collect();

        let w = WhereInClause{
			condition: format!("OR result_code IN ({})", marks),
            args: arr,
        };
        self.q.wheres_ins.push(w);
        self
    }

    pub fn debug_data_in (&mut self, val: Vec<&str> ) -> &mut Self {
		let len = val.len();
        if len == 0 {
            return self
        }

        let mut marks = "?,".repeat(len);
        marks.remove(marks.len()-1);

		let arr = val.iter().map(|v|v.into()).collect();

        let w = WhereInClause{
			condition: format!(" debug_data IN ({})", marks),
            args: arr,
        };
        self.q.wheres_ins.push(w);
        self
    }

    pub fn and_debug_data_in (&mut self, val: Vec<&str> ) -> &mut Self {
		let len = val.len();
        if len == 0 {
            return self
        }

        let mut marks = "?,".repeat(len);
        marks.remove(marks.len()-1);

		let arr = val.iter().map(|v|v.into()).collect();

        let w = WhereInClause{
			condition: format!("AND debug_data IN ({})", marks),
            args: arr,
        };
        self.q.wheres_ins.push(w);
        self
    }

    pub fn or_debug_data_in (&mut self, val: Vec<&str> ) -> &mut Self {
		let len = val.len();
        if len == 0 {
            return self
        }

        let mut marks = "?,".repeat(len);
        marks.remove(marks.len()-1);

		let arr = val.iter().map(|v|v.into()).collect();

        let w = WhereInClause{
			condition: format!("OR debug_data IN ({})", marks),
            args: arr,
        };
        self.q.wheres_ins.push(w);
        self
    }

}

// Deleter

#[derive(Default, Debug)]
pub struct SmsDeleter {
    q: TQuery
}

impl SmsDeleter {
    pub fn new() -> Self {
        SmsDeleter{
            q: TQuery{
                table: "sms",
                ..Default::default()
            }
        }
    }

    pub fn limit(&mut self, size: u32) -> &mut Self {
        self.q.limit = size;
        self
    }

    pub async fn delete(&mut self, session: &SPool) -> Result<(),MyError> {
        delete_rows(&self.q, session).await
    }

    
    pub fn order_by_sms_id_asc(&mut self) -> &mut Self {
		self.q.order_by.push("sms_id ASC");
        self
    }

	pub fn order_by_sms_id_desc(&mut self) -> &mut Self {
		self.q.order_by.push("sms_id DESC");
        self
    }

    pub fn order_by_phone_number_asc(&mut self) -> &mut Self {
		self.q.order_by.push("phone_number ASC");
        self
    }

	pub fn order_by_phone_number_desc(&mut self) -> &mut Self {
		self.q.order_by.push("phone_number DESC");
        self
    }

    pub fn order_by_hash_code_asc(&mut self) -> &mut Self {
		self.q.order_by.push("hash_code ASC");
        self
    }

	pub fn order_by_hash_code_desc(&mut self) -> &mut Self {
		self.q.order_by.push("hash_code DESC");
        self
    }

    pub fn order_by_result_code_asc(&mut self) -> &mut Self {
		self.q.order_by.push("result_code ASC");
        self
    }

	pub fn order_by_result_code_desc(&mut self) -> &mut Self {
		self.q.order_by.push("result_code DESC");
        self
    }

    pub fn order_by_debug_data_asc(&mut self) -> &mut Self {
		self.q.order_by.push("debug_data ASC");
        self
    }

	pub fn order_by_debug_data_desc(&mut self) -> &mut Self {
		self.q.order_by.push("debug_data DESC");
        self
    }

    
    pub fn sms_id_eq (&mut self, val: u64 ) -> &mut Self {
        let w = WhereClause{
            condition: " sms_id = ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn sms_id_lt (&mut self, val: u64 ) -> &mut Self {
        let w = WhereClause{
            condition: " sms_id < ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn sms_id_le (&mut self, val: u64 ) -> &mut Self {
        let w = WhereClause{
            condition: " sms_id <= ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn sms_id_gt (&mut self, val: u64 ) -> &mut Self {
        let w = WhereClause{
            condition: " sms_id > ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn sms_id_ge (&mut self, val: u64 ) -> &mut Self {
        let w = WhereClause{
            condition: " sms_id >= ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn and_sms_id_eq (&mut self, val: u64 ) -> &mut Self {
        let w = WhereClause{
            condition: "AND sms_id = ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn and_sms_id_lt (&mut self, val: u64 ) -> &mut Self {
        let w = WhereClause{
            condition: "AND sms_id < ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn and_sms_id_le (&mut self, val: u64 ) -> &mut Self {
        let w = WhereClause{
            condition: "AND sms_id <= ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn and_sms_id_gt (&mut self, val: u64 ) -> &mut Self {
        let w = WhereClause{
            condition: "AND sms_id > ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn and_sms_id_ge (&mut self, val: u64 ) -> &mut Self {
        let w = WhereClause{
            condition: "AND sms_id >= ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn or_sms_id_eq (&mut self, val: u64 ) -> &mut Self {
        let w = WhereClause{
            condition: "OR sms_id = ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn or_sms_id_lt (&mut self, val: u64 ) -> &mut Self {
        let w = WhereClause{
            condition: "OR sms_id < ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn or_sms_id_le (&mut self, val: u64 ) -> &mut Self {
        let w = WhereClause{
            condition: "OR sms_id <= ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn or_sms_id_gt (&mut self, val: u64 ) -> &mut Self {
        let w = WhereClause{
            condition: "OR sms_id > ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn or_sms_id_ge (&mut self, val: u64 ) -> &mut Self {
        let w = WhereClause{
            condition: "OR sms_id >= ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn phone_number_eq (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: " phone_number = ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn phone_number_lt (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: " phone_number < ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn phone_number_le (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: " phone_number <= ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn phone_number_gt (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: " phone_number > ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn phone_number_ge (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: " phone_number >= ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn and_phone_number_eq (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: "AND phone_number = ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn and_phone_number_lt (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: "AND phone_number < ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn and_phone_number_le (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: "AND phone_number <= ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn and_phone_number_gt (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: "AND phone_number > ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn and_phone_number_ge (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: "AND phone_number >= ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn or_phone_number_eq (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: "OR phone_number = ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn or_phone_number_lt (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: "OR phone_number < ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn or_phone_number_le (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: "OR phone_number <= ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn or_phone_number_gt (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: "OR phone_number > ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn or_phone_number_ge (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: "OR phone_number >= ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn hash_code_eq (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: " hash_code = ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn hash_code_lt (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: " hash_code < ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn hash_code_le (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: " hash_code <= ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn hash_code_gt (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: " hash_code > ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn hash_code_ge (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: " hash_code >= ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn and_hash_code_eq (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: "AND hash_code = ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn and_hash_code_lt (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: "AND hash_code < ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn and_hash_code_le (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: "AND hash_code <= ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn and_hash_code_gt (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: "AND hash_code > ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn and_hash_code_ge (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: "AND hash_code >= ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn or_hash_code_eq (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: "OR hash_code = ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn or_hash_code_lt (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: "OR hash_code < ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn or_hash_code_le (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: "OR hash_code <= ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn or_hash_code_gt (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: "OR hash_code > ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn or_hash_code_ge (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: "OR hash_code >= ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn result_code_eq (&mut self, val: u32 ) -> &mut Self {
        let w = WhereClause{
            condition: " result_code = ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn result_code_lt (&mut self, val: u32 ) -> &mut Self {
        let w = WhereClause{
            condition: " result_code < ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn result_code_le (&mut self, val: u32 ) -> &mut Self {
        let w = WhereClause{
            condition: " result_code <= ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn result_code_gt (&mut self, val: u32 ) -> &mut Self {
        let w = WhereClause{
            condition: " result_code > ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn result_code_ge (&mut self, val: u32 ) -> &mut Self {
        let w = WhereClause{
            condition: " result_code >= ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn and_result_code_eq (&mut self, val: u32 ) -> &mut Self {
        let w = WhereClause{
            condition: "AND result_code = ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn and_result_code_lt (&mut self, val: u32 ) -> &mut Self {
        let w = WhereClause{
            condition: "AND result_code < ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn and_result_code_le (&mut self, val: u32 ) -> &mut Self {
        let w = WhereClause{
            condition: "AND result_code <= ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn and_result_code_gt (&mut self, val: u32 ) -> &mut Self {
        let w = WhereClause{
            condition: "AND result_code > ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn and_result_code_ge (&mut self, val: u32 ) -> &mut Self {
        let w = WhereClause{
            condition: "AND result_code >= ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn or_result_code_eq (&mut self, val: u32 ) -> &mut Self {
        let w = WhereClause{
            condition: "OR result_code = ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn or_result_code_lt (&mut self, val: u32 ) -> &mut Self {
        let w = WhereClause{
            condition: "OR result_code < ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn or_result_code_le (&mut self, val: u32 ) -> &mut Self {
        let w = WhereClause{
            condition: "OR result_code <= ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn or_result_code_gt (&mut self, val: u32 ) -> &mut Self {
        let w = WhereClause{
            condition: "OR result_code > ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn or_result_code_ge (&mut self, val: u32 ) -> &mut Self {
        let w = WhereClause{
            condition: "OR result_code >= ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn debug_data_eq (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: " debug_data = ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn debug_data_lt (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: " debug_data < ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn debug_data_le (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: " debug_data <= ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn debug_data_gt (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: " debug_data > ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn debug_data_ge (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: " debug_data >= ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn and_debug_data_eq (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: "AND debug_data = ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn and_debug_data_lt (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: "AND debug_data < ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn and_debug_data_le (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: "AND debug_data <= ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn and_debug_data_gt (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: "AND debug_data > ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn and_debug_data_ge (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: "AND debug_data >= ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn or_debug_data_eq (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: "OR debug_data = ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn or_debug_data_lt (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: "OR debug_data < ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn or_debug_data_le (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: "OR debug_data <= ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn or_debug_data_gt (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: "OR debug_data > ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    pub fn or_debug_data_ge (&mut self, val: &str ) -> &mut Self {
        let w = WhereClause{
            condition: "OR debug_data >= ?".to_string(),
            args: val.into(),
        };
        self.q.wheres.push(w);
        self
    }

    
    pub fn sms_id_in (&mut self, val: Vec<u64> ) -> &mut Self {
		let len = val.len();
        if len == 0 {
            return self
        }

        let mut marks = "?,".repeat(len);
        marks.remove(marks.len()-1);

		let arr = val.iter().map(|v|v.into()).collect();

        let w = WhereInClause{
			condition: format!(" sms_id IN ({})", marks),
            args: arr,
        };
        self.q.wheres_ins.push(w);
        self
    }

    pub fn and_sms_id_in (&mut self, val: Vec<u64> ) -> &mut Self {
		let len = val.len();
        if len == 0 {
            return self
        }

        let mut marks = "?,".repeat(len);
        marks.remove(marks.len()-1);

		let arr = val.iter().map(|v|v.into()).collect();

        let w = WhereInClause{
			condition: format!("AND sms_id IN ({})", marks),
            args: arr,
        };
        self.q.wheres_ins.push(w);
        self
    }

    pub fn or_sms_id_in (&mut self, val: Vec<u64> ) -> &mut Self {
		let len = val.len();
        if len == 0 {
            return self
        }

        let mut marks = "?,".repeat(len);
        marks.remove(marks.len()-1);

		let arr = val.iter().map(|v|v.into()).collect();

        let w = WhereInClause{
			condition: format!("OR sms_id IN ({})", marks),
            args: arr,
        };
        self.q.wheres_ins.push(w);
        self
    }

    pub fn phone_number_in (&mut self, val: Vec<&str> ) -> &mut Self {
		let len = val.len();
        if len == 0 {
            return self
        }

        let mut marks = "?,".repeat(len);
        marks.remove(marks.len()-1);

		let arr = val.iter().map(|v|v.into()).collect();

        let w = WhereInClause{
			condition: format!(" phone_number IN ({})", marks),
            args: arr,
        };
        self.q.wheres_ins.push(w);
        self
    }

    pub fn and_phone_number_in (&mut self, val: Vec<&str> ) -> &mut Self {
		let len = val.len();
        if len == 0 {
            return self
        }

        let mut marks = "?,".repeat(len);
        marks.remove(marks.len()-1);

		let arr = val.iter().map(|v|v.into()).collect();

        let w = WhereInClause{
			condition: format!("AND phone_number IN ({})", marks),
            args: arr,
        };
        self.q.wheres_ins.push(w);
        self
    }

    pub fn or_phone_number_in (&mut self, val: Vec<&str> ) -> &mut Self {
		let len = val.len();
        if len == 0 {
            return self
        }

        let mut marks = "?,".repeat(len);
        marks.remove(marks.len()-1);

		let arr = val.iter().map(|v|v.into()).collect();

        let w = WhereInClause{
			condition: format!("OR phone_number IN ({})", marks),
            args: arr,
        };
        self.q.wheres_ins.push(w);
        self
    }

    pub fn hash_code_in (&mut self, val: Vec<&str> ) -> &mut Self {
		let len = val.len();
        if len == 0 {
            return self
        }

        let mut marks = "?,".repeat(len);
        marks.remove(marks.len()-1);

		let arr = val.iter().map(|v|v.into()).collect();

        let w = WhereInClause{
			condition: format!(" hash_code IN ({})", marks),
            args: arr,
        };
        self.q.wheres_ins.push(w);
        self
    }

    pub fn and_hash_code_in (&mut self, val: Vec<&str> ) -> &mut Self {
		let len = val.len();
        if len == 0 {
            return self
        }

        let mut marks = "?,".repeat(len);
        marks.remove(marks.len()-1);

		let arr = val.iter().map(|v|v.into()).collect();

        let w = WhereInClause{
			condition: format!("AND hash_code IN ({})", marks),
            args: arr,
        };
        self.q.wheres_ins.push(w);
        self
    }

    pub fn or_hash_code_in (&mut self, val: Vec<&str> ) -> &mut Self {
		let len = val.len();
        if len == 0 {
            return self
        }

        let mut marks = "?,".repeat(len);
        marks.remove(marks.len()-1);

		let arr = val.iter().map(|v|v.into()).collect();

        let w = WhereInClause{
			condition: format!("OR hash_code IN ({})", marks),
            args: arr,
        };
        self.q.wheres_ins.push(w);
        self
    }

    pub fn result_code_in (&mut self, val: Vec<u32> ) -> &mut Self {
		let len = val.len();
        if len == 0 {
            return self
        }

        let mut marks = "?,".repeat(len);
        marks.remove(marks.len()-1);

		let arr = val.iter().map(|v|v.into()).collect();

        let w = WhereInClause{
			condition: format!(" result_code IN ({})", marks),
            args: arr,
        };
        self.q.wheres_ins.push(w);
        self
    }

    pub fn and_result_code_in (&mut self, val: Vec<u32> ) -> &mut Self {
		let len = val.len();
        if len == 0 {
            return self
        }

        let mut marks = "?,".repeat(len);
        marks.remove(marks.len()-1);

		let arr = val.iter().map(|v|v.into()).collect();

        let w = WhereInClause{
			condition: format!("AND result_code IN ({})", marks),
            args: arr,
        };
        self.q.wheres_ins.push(w);
        self
    }

    pub fn or_result_code_in (&mut self, val: Vec<u32> ) -> &mut Self {
		let len = val.len();
        if len == 0 {
            return self
        }

        let mut marks = "?,".repeat(len);
        marks.remove(marks.len()-1);

		let arr = val.iter().map(|v|v.into()).collect();

        let w = WhereInClause{
			condition: format!("OR result_code IN ({})", marks),
            args: arr,
        };
        self.q.wheres_ins.push(w);
        self
    }

    pub fn debug_data_in (&mut self, val: Vec<&str> ) -> &mut Self {
		let len = val.len();
        if len == 0 {
            return self
        }

        let mut marks = "?,".repeat(len);
        marks.remove(marks.len()-1);

		let arr = val.iter().map(|v|v.into()).collect();

        let w = WhereInClause{
			condition: format!(" debug_data IN ({})", marks),
            args: arr,
        };
        self.q.wheres_ins.push(w);
        self
    }

    pub fn and_debug_data_in (&mut self, val: Vec<&str> ) -> &mut Self {
		let len = val.len();
        if len == 0 {
            return self
        }

        let mut marks = "?,".repeat(len);
        marks.remove(marks.len()-1);

		let arr = val.iter().map(|v|v.into()).collect();

        let w = WhereInClause{
			condition: format!("AND debug_data IN ({})", marks),
            args: arr,
        };
        self.q.wheres_ins.push(w);
        self
    }

    pub fn or_debug_data_in (&mut self, val: Vec<&str> ) -> &mut Self {
		let len = val.len();
        if len == 0 {
            return self
        }

        let mut marks = "?,".repeat(len);
        marks.remove(marks.len()-1);

		let arr = val.iter().map(|v|v.into()).collect();

        let w = WhereInClause{
			condition: format!("OR debug_data IN ({})", marks),
            args: arr,
        };
        self.q.wheres_ins.push(w);
        self
    }

}

pub async fn sms_mass_insert(arr :&Vec<Sms>, spool: &SPool) -> Result<(),MyError> {
    let mut conn = spool.pool.get_conn().await?;
    if arr.len() == 0 {
        return Err(MyError::EmptySql)
    }
    let mut insert_fields = "(phone_number, hash_code, result_code, pb_data, debug_data)";

    let mut vals_str = "(?, ?, ?, ?, ?), ".repeat(arr.len());
   
    let vals_str = &vals_str[0..(vals_str.len()-2)];

    let query = format!(r"INSERT INTO {:}.tweet {:} VALUES {:}", &spool.database, insert_fields, vals_str);

    let mut arr_vals = vec![];
    for ar in arr {
                
                arr_vals.push(ar.phone_number.clone().into());
                arr_vals.push(ar.hash_code.clone().into());
                arr_vals.push(ar.result_code.clone().into());
                arr_vals.push(ar.pb_data.clone().into());
                arr_vals.push(ar.debug_data.clone().into());
       }

    let p = Params::Positional(arr_vals);

    println!("{} - {:?}", &query, &p);

    let qr = conn.exec_iter(
        query, p
    ).await?;

    Ok(())
}

// Index
pub async fn hash_code(hash_code: &str, spool: &SPool) -> Result<Sms,MyError> {
	let m = SmsSelector::new()
		.hash_code_eq(hash_code)
		.get_row(spool).await?;
	Ok(m)
}

pub async fn get_sms(sms_id: u64, spool: &SPool) -> Result<Sms,MyError> {
	let m = SmsSelector::new()
		.sms_id_eq(sms_id)
		.get_row(spool).await?;
	Ok(m)
}
